{"ast":null,"code":"import _regeneratorRuntime from \"/media/renatha/Downloads/DEV/IFPB/contacts-ui/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/media/renatha/Downloads/DEV/IFPB/contacts-ui/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/media/renatha/Downloads/DEV/IFPB/contacts-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _extends from \"/media/renatha/Downloads/DEV/IFPB/contacts-ui/node_modules/@babel/runtime/helpers/esm/extends\";\n\nvar _this = this,\n    _jsxFileName = \"/media/renatha/Downloads/DEV/IFPB/contacts-ui/components/withPrivateRoute.js\";\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useContext } from 'react';\nimport Router from 'next/router';\nimport AuthContext from '../context/auth/authContext';\nvar login = '/login?redirected=true'; // const \n\nexport default (function (WrappedComponent) {\n  var hocComponent = function hocComponent(_ref) {\n    var props = _extends({}, _ref);\n\n    return __jsx(WrappedComponent, _extends({}, props, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 10,\n        columnNumber: 42\n      }\n    }));\n  };\n\n  hocComponent.getInitialProps = /*#__PURE__*/function () {\n    var _s = $RefreshSig$();\n\n    var _ref2 = _asyncToGenerator(_s( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(context) {\n      var authContext, isAuthenticated, loading, userAuth, _context$res, _context$res2, wrapperProps;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _s();\n\n              // const checkUserAuthentication = () => {\n              authContext = useContext(AuthContext);\n              isAuthenticated = authContext.isAuthenticated, loading = authContext.loading; // return { auth: isAuthenticated }\n              // }\n\n              _context.next = 5;\n              return checkUserAuthentication();\n\n            case 5:\n              userAuth = _context.sent;\n\n              if (userAuth === null || userAuth === void 0 ? void 0 : userAuth.auth) {\n                _context.next = 10;\n                break;\n              }\n\n              if (context.res) {\n                (_context$res = context.res) === null || _context$res === void 0 ? void 0 : _context$res.writeHead(302, {\n                  Location: login\n                });\n                (_context$res2 = context.res) === null || _context$res2 === void 0 ? void 0 : _context$res2.end();\n              } else {\n                Router.replace(login);\n              }\n\n              _context.next = 15;\n              break;\n\n            case 10:\n              if (!WrappedComponent.getInitialProps) {\n                _context.next = 15;\n                break;\n              }\n\n              _context.next = 13;\n              return WrappedComponent.getInitialProps(_objectSpread(_objectSpread({}, context), {}, {\n                auth: userAuth\n              }));\n\n            case 13:\n              wrapperProps = _context.sent;\n              return _context.abrupt(\"return\", _objectSpread(_objectSpread({}, wrapperProps), {}, {\n                userAuth: userAuth\n              }));\n\n            case 15:\n              return _context.abrupt(\"return\", {\n                userAuth: userAuth\n              });\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }), \"g0q6N3HTsGa67OokMUhTOzE2a0M=\"));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return hocComponent;\n});","map":{"version":3,"sources":["/media/renatha/Downloads/DEV/IFPB/contacts-ui/components/withPrivateRoute.js"],"names":["React","useContext","Router","AuthContext","login","WrappedComponent","hocComponent","props","getInitialProps","context","authContext","isAuthenticated","loading","checkUserAuthentication","userAuth","auth","res","writeHead","Location","end","replace","wrapperProps"],"mappings":";;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,MAAP,MAAmB,aAAnB;AAEA,OAAOC,WAAP,MAAwB,6BAAxB;AAEA,IAAMC,KAAK,GAAG,wBAAd,C,CAEA;;AACA,gBAAe,UAAAC,gBAAgB,EAAI;AACjC,MAAMC,YAAY,GAAG,SAAfA,YAAe;AAAA,QAAMC,KAAN;;AAAA,WAAkB,MAAC,gBAAD,eAAsBA,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAlB;AAAA,GAArB;;AACAD,EAAAA,YAAY,CAACE,eAAb;AAAA;;AAAA,4EAA+B,iBAAOC,OAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAC7B;AACQC,cAAAA,WAFqB,GAEPT,UAAU,CAACE,WAAD,CAFH;AAGnBQ,cAAAA,eAHmB,GAGUD,WAHV,CAGnBC,eAHmB,EAGFC,OAHE,GAGUF,WAHV,CAGFE,OAHE,EAI3B;AACF;;AAL6B;AAAA,qBAMNC,uBAAuB,EANjB;;AAAA;AAMvBC,cAAAA,QANuB;;AAAA,kBAQxBA,QARwB,aAQxBA,QARwB,uBAQxBA,QAAQ,CAAEC,IARc;AAAA;AAAA;AAAA;;AAS3B,kBAAIN,OAAO,CAACO,GAAZ,EAAiB;AACf,gCAAAP,OAAO,CAACO,GAAR,8DAAaC,SAAb,CAAuB,GAAvB,EAA4B;AAC1BC,kBAAAA,QAAQ,EAAEd;AADgB,iBAA5B;AAGA,iCAAAK,OAAO,CAACO,GAAR,gEAAaG,GAAb;AACD,eALD,MAKO;AACLjB,gBAAAA,MAAM,CAACkB,OAAP,CAAehB,KAAf;AACD;;AAhB0B;AAAA;;AAAA;AAAA,mBAiBlBC,gBAAgB,CAACG,eAjBC;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAkBAH,gBAAgB,CAACG,eAAjB,iCAAsCC,OAAtC;AAA+CM,gBAAAA,IAAI,EAAED;AAArD,iBAlBA;;AAAA;AAkBrBO,cAAAA,YAlBqB;AAAA,+EAmBfA,YAnBe;AAmBDP,gBAAAA,QAAQ,EAARA;AAnBC;;AAAA;AAAA,+CAqBtB;AAAEA,gBAAAA,QAAQ,EAARA;AAAF,eArBsB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA/B;;AAAA;AAAA;AAAA;AAAA;;AAuBA,SAAOR,YAAP;AACD,CA1BD","sourcesContent":["import React, { useContext } from 'react'\nimport Router from 'next/router'\n\nimport AuthContext from '../context/auth/authContext'\n\nconst login = '/login?redirected=true'\n\n// const \nexport default WrappedComponent => {\n  const hocComponent = ({ ...props }) => <WrappedComponent {...props} />\n  hocComponent.getInitialProps = async (context) => {\n    // const checkUserAuthentication = () => {\n      const authContext = useContext(AuthContext)\n      const { isAuthenticated, loading } = authContext\n      // return { auth: isAuthenticated }\n    // }\n    const userAuth = await checkUserAuthentication()\n\n    if (!userAuth?.auth) {\n      if (context.res) {\n        context.res?.writeHead(302, {\n          Location: login,\n        })\n        context.res?.end()\n      } else {\n        Router.replace(login)\n      }\n    } else if (WrappedComponent.getInitialProps) {\n      const wrapperProps = await WrappedComponent.getInitialProps({ ...context, auth: userAuth })\n      return { ...wrapperProps, userAuth }\n    }\n    return { userAuth }\n  }\n  return hocComponent\n}\n"]},"metadata":{},"sourceType":"module"}