{"ast":null,"code":"import _regeneratorRuntime from \"/media/renatha/Downloads/DEV/IFPB/contacts-ui/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/media/renatha/Downloads/DEV/IFPB/contacts-ui/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/media/renatha/Downloads/DEV/IFPB/contacts-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _extends from \"/media/renatha/Downloads/DEV/IFPB/contacts-ui/node_modules/@babel/runtime/helpers/esm/extends\";\n\nvar _this = this,\n    _jsxFileName = \"/media/renatha/Downloads/DEV/IFPB/contacts-ui/components/withPrivateRoute.js\";\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useContext } from 'react';\nimport Router from 'next/router';\nimport AuthContext from '../context/auth/authContext';\nvar login = '/login?redirected=true';\n\nvar withPrivateRoute = function withPrivateRoute(props) {\n  return function (WrappedComponent) {\n    var _s = $RefreshSig$();\n\n    var hocComponent = function hocComponent(_ref) {\n      var props = _extends({}, _ref);\n\n      return __jsx(WrappedComponent, _extends({}, props, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 9,\n          columnNumber: 42\n        }\n      }));\n    };\n\n    var checkUserAuthentication = function checkUserAuthentication() {\n      _s();\n\n      var authContext = useContext(AuthContext);\n      var isAuthenticated = authContext.isAuthenticated;\n      return {\n        auth: isAuthenticated\n      };\n    };\n\n    _s(checkUserAuthentication, \"g0q6N3HTsGa67OokMUhTOzE2a0M=\");\n\n    hocComponent.getInitialProps = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(context) {\n        var userAuth, _context$res, _context$res2, wrapperProps;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return checkUserAuthentication();\n\n              case 2:\n                userAuth = _context.sent;\n\n                if (userAuth === null || userAuth === void 0 ? void 0 : userAuth.auth) {\n                  _context.next = 7;\n                  break;\n                }\n\n                if (context.res) {\n                  (_context$res = context.res) === null || _context$res === void 0 ? void 0 : _context$res.writeHead(302, {\n                    Location: login\n                  });\n                  (_context$res2 = context.res) === null || _context$res2 === void 0 ? void 0 : _context$res2.end();\n                } else {\n                  Router.replace(login);\n                }\n\n                _context.next = 12;\n                break;\n\n              case 7:\n                if (!WrappedComponent.getInitialProps) {\n                  _context.next = 12;\n                  break;\n                }\n\n                _context.next = 10;\n                return WrappedComponent.getInitialProps(_objectSpread(_objectSpread({}, context), {}, {\n                  auth: userAuth\n                }));\n\n              case 10:\n                wrapperProps = _context.sent;\n                return _context.abrupt(\"return\", _objectSpread(_objectSpread({}, wrapperProps), {}, {\n                  userAuth: userAuth\n                }));\n\n              case 12:\n                return _context.abrupt(\"return\", {\n                  userAuth: userAuth\n                });\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    return hocComponent;\n  };\n};\n\nexport default withPrivateRoute;","map":{"version":3,"sources":["/media/renatha/Downloads/DEV/IFPB/contacts-ui/components/withPrivateRoute.js"],"names":["React","useContext","Router","AuthContext","login","withPrivateRoute","props","WrappedComponent","hocComponent","checkUserAuthentication","authContext","isAuthenticated","auth","getInitialProps","context","userAuth","res","writeHead","Location","end","replace","wrapperProps"],"mappings":";;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,MAAP,MAAmB,aAAnB;AAEA,OAAOC,WAAP,MAAwB,6BAAxB;AAEA,IAAMC,KAAK,GAAG,wBAAd;;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,KAAK;AAAA,SAAI,UAAAC,gBAAgB,EAAI;AAAA;;AACpD,QAAMC,YAAY,GAAG,SAAfA,YAAe;AAAA,UAAMF,KAAN;;AAAA,aAAkB,MAAC,gBAAD,eAAsBA,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAlB;AAAA,KAArB;;AACA,QAAMG,uBAAuB,GAAG,SAA1BA,uBAA0B,GAAM;AAAA;;AACpC,UAAMC,WAAW,GAAGT,UAAU,CAACE,WAAD,CAA9B;AADoC,UAE5BQ,eAF4B,GAERD,WAFQ,CAE5BC,eAF4B;AAGpC,aAAO;AAAEC,QAAAA,IAAI,EAAED;AAAR,OAAP;AACD,KAJD;;AAFoD,OAE9CF,uBAF8C;;AAOpDD,IAAAA,YAAY,CAACK,eAAb;AAAA,2EAA+B,iBAAOC,OAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACNL,uBAAuB,EADjB;;AAAA;AACvBM,gBAAAA,QADuB;;AAAA,oBAGxBA,QAHwB,aAGxBA,QAHwB,uBAGxBA,QAAQ,CAAEH,IAHc;AAAA;AAAA;AAAA;;AAI3B,oBAAIE,OAAO,CAACE,GAAZ,EAAiB;AACf,kCAAAF,OAAO,CAACE,GAAR,8DAAaC,SAAb,CAAuB,GAAvB,EAA4B;AAC1BC,oBAAAA,QAAQ,EAAEd;AADgB,mBAA5B;AAGA,mCAAAU,OAAO,CAACE,GAAR,gEAAaG,GAAb;AACD,iBALD,MAKO;AACLjB,kBAAAA,MAAM,CAACkB,OAAP,CAAehB,KAAf;AACD;;AAX0B;AAAA;;AAAA;AAAA,qBAYlBG,gBAAgB,CAACM,eAZC;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAaAN,gBAAgB,CAACM,eAAjB,iCAAsCC,OAAtC;AAA+CF,kBAAAA,IAAI,EAAEG;AAArD,mBAbA;;AAAA;AAarBM,gBAAAA,YAbqB;AAAA,iFAcfA,YAde;AAcDN,kBAAAA,QAAQ,EAARA;AAdC;;AAAA;AAAA,iDAgBtB;AAAEA,kBAAAA,QAAQ,EAARA;AAAF,iBAhBsB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA/B;;AAAA;AAAA;AAAA;AAAA;;AAkBA,WAAOP,YAAP;AACD,GA1B6B;AAAA,CAA9B;;AA4BA,eAAeH,gBAAf","sourcesContent":["import React, { useContext } from 'react'\nimport Router from 'next/router'\n\nimport AuthContext from '../context/auth/authContext'\n\nconst login = '/login?redirected=true'\n\nconst withPrivateRoute = props => WrappedComponent => {\n  const hocComponent = ({ ...props }) => <WrappedComponent {...props} />\n  const checkUserAuthentication = () => {\n    const authContext = useContext(AuthContext)\n    const { isAuthenticated } = authContext\n    return { auth: isAuthenticated }\n  }\n  hocComponent.getInitialProps = async (context) => {\n    const userAuth = await checkUserAuthentication()\n\n    if (!userAuth?.auth) {\n      if (context.res) {\n        context.res?.writeHead(302, {\n          Location: login,\n        })\n        context.res?.end()\n      } else {\n        Router.replace(login)\n      }\n    } else if (WrappedComponent.getInitialProps) {\n      const wrapperProps = await WrappedComponent.getInitialProps({ ...context, auth: userAuth })\n      return { ...wrapperProps, userAuth }\n    }\n    return { userAuth }\n  }\n  return hocComponent\n}\n\nexport default withPrivateRoute\n"]},"metadata":{},"sourceType":"module"}